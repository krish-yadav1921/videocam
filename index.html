<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Backchodi Bro UI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0d1321] text-white min-h-screen flex flex-col">

  <!-- Top Bar -->
  <div class="flex justify-between items-center bg-[#1e293b] p-4">
    <img src="homepage-icon-house-illustration-sign-home-symbol-building-logo-vector.jpg" alt="Home" class="w-10 h-10">
    <input type="text" placeholder="Search" class="bg-gray-800 text-white rounded px-3 py-1 w-1/2 outline-none" />
    <img src="1200x630wa.png" alt="Flash" class="w-10 h-10">
    <button id="googleLoginBtn" class="bg-white text-black px-4 py-2 rounded-xl font-semibold hover:bg-gray-200 transition">
      Login with Google
    </button>
  </div>

  <!-- Cards Container -->
  <div class="flex flex-wrap justify-center gap-6 p-6">
    <div class="bg-[#1e293b] rounded-xl p-4 w-64 text-center shadow-lg">
      <div class="flex justify-center items-center gap-2">
        <img src="download.webp" alt="Player 1" class="w-16 h-16 rounded-full border-2 border-blue-500">
        <img src="1200x630wa.png" alt="VS" class="w-8 h-8">
        <img src="download.webp" alt="Player 2" class="w-16 h-16 rounded-full border-2 border-red-500">
      </div>
      <button class="join-btn bg-green-600 mt-4 px-4 py-2 rounded-xl hover:bg-green-700 transition">JOIN NOW</button>
    </div>

    <div class="bg-[#1e293b] rounded-xl p-4 w-64 text-center shadow-lg">
      <div class="flex justify-center items-center gap-2">
        <img src="download.webp" alt="Player 1" class="w-16 h-16 rounded-full border-2 border-blue-500">
        <img src="1200x630wa.png" alt="VS" class="w-8 h-8">
        <img src="download.webp" alt="Player 2" class="w-16 h-16 rounded-full border-2 border-red-500">
      </div>
      <button class="join-btn bg-green-600 mt-4 px-4 py-2 rounded-xl hover:bg-green-700 transition">JOIN NOW</button>
    </div>
  </div>

  <!-- Bottom Nav -->
  <div class="flex justify-around items-center bg-[#1e293b] p-4 fixed bottom-0 w-full">
    <img src="OIP.png" alt="Hot" class="w-8 h-8">
    <img src="pngtree-trophy-sign-icon-champion-vector-picture-image_10545046.png" alt="Trophy" class="w-8 h-8">
    <img src="Screenshot 2025-07-08 205353.png" alt="Community" class="w-8 h-8">
    <img src="online-chat-computer-icons-symbol-icon-design-png-favpng-zZZdFEDePjG57FWR28cctNnca.jpg" alt="Chat" class="w-8 h-8">
    <img src="download.webp" alt="Profile" class="w-8 h-8 rounded-full">
  </div>

  <!-- Firebase Auth + Firestore Logic -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAp444Vi-iivVHmY-4f0A8YFraABgknkf4",
      authDomain: "krish-d0206.firebaseapp.com",
      projectId: "krish-d0206",
      storageBucket: "krish-d0206.appspot.com",
      messagingSenderId: "669277883647",
      appId: "1:669277883647:web:59c952c78093e072a910ca"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();
    const db = getFirestore(app);

    let currentUser = null;

    // Google Login
    const loginBtn = document.getElementById("googleLoginBtn");
    loginBtn.addEventListener("click", async () => {
      try {
        const result = await signInWithPopup(auth, provider);
        currentUser = result.user;
        alert(`üî• Welcome ${currentUser.displayName}`);
      } catch (error) {
        console.error("Login Failed:", error.message);
      }
    });

    // JOIN NOW
    document.querySelectorAll(".join-btn").forEach((btn) => {
      btn.addEventListener("click", async () => {
        if (!auth.currentUser) {
          alert("‚ö†Ô∏è Please login first!");
          return;
        }

        const user = auth.currentUser;
        try {
          const docRef = await addDoc(collection(db, "roastMatches"), {
            player1: user.uid,
            player1Info: {
              name: user.displayName,
              photo: user.photoURL
            },
            player2: null,
            player2Info: null,
            video1: null,
            video2: null,
            votes1: 0,
            votes2: 0,
            createdAt: new Date()
          });

          // Redirect to match room with matchId
          window.location.href = `match-room.html?matchId=${docRef.id}`;
        } catch (e) {
          console.error("‚ùå Firestore Error: ", e);
        }
      });
    });
  </script>
</body>
</html>
